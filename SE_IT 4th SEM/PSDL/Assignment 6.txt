//Assignment 6

#include <pic18f4550.h>
#define ll int

void __interrupt() relay(){
    if(INTCON3bits.INT1IF == 1){
        INTCONbits.GIE = 0;
        PORTAbits.RA4 = 1;
        for(ll i=0; i<1000; i++){
            for(ll j=0; j<100; j++){
                
            }
        }
        PORTAbits.RA4 = 0;
        INTCON3bits.INT1IF = 0;            
        INTCONbits.GIE = 1;
    }
}

void main(void){
    TRISBbits.RB1 = 1;
    TRISAbits.RA4 = 0;      //RELAYYYY
    INTCON3bits.INT1IF = 0;
    INTCON3bits.INT1IE = 1;
    INTCON2bits.INTEDG1 = 0;    //Falling Edge
    INTCONbits.PEIE = 1;
    INTCONbits.GIE = 1;
    while(1);
    
    return;
}
